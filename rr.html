<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>W3Cschool教程(w3cschool.cn)</title>
    <script src="js/lib/heatmap.js"></script>
    <style>
        .heatmap {
            height: 400px;
            width: 840px;
        }
    </style>
</head>
<body>
<img id="img1">
<script>
    // minimal heatmap instance configuration
    let container = document.createElement("div");
    container.style.width = "840px";
    container.style.height = "400px";
    // container.style.backgroundColor = "red";
    document.body.appendChild(container);
    var heatmapInstance = h337.create({
        // only container is required, the rest will be defaults
        // container: document.querySelector('.heatmap')
        container: container
    });
    //
    // now generate some random data
    var points = [];
    var max = 0;
    var width = 840;
    var height = 400;
    var len = 200;

    while (len--) {
        var val = Math.floor(Math.random() * 100);
        max = Math.max(max, val);
        var point = {
            x: Math.floor(Math.random() * width),
            y: Math.floor(Math.random() * height),
            value: val
        };
        points.push(point);
    }
    // heatmap data format
    var data = {
        max: max,
        data: points
    };
    // if you have a set of datapoints always use setData instead of addData
    // for data initialization
    heatmapInstance.setData(data);
    // let dataUrl = heatmapInstance.getDataURL();

    //从 canvas 提取图片 image
    function convertCanvasToImage() {
        //新Image对象，可以理解为DOM
        var image = new Image();
        // canvas.toDataURL 返回的是一串Base64编码的URL
        // 指定格式 PNG
        // image.src = canvas.toDataURL("image/png");
        image.src = heatmapInstance.getDataURL();
        return image;
    }

    // convertCanvasToImage();
    let img1 = document.getElementById("img1");
    img1.src = heatmapInstance.getDataURL();

    // document.body.removeChild(container);
    //
    // // console.log(heatmapInstance);
</script>

</body>
</html>
